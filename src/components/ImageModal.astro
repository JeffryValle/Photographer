---

---

<div
    id="imageModal"
    class="fixed inset-0 z-50 bg-black justify-center items-center p-4 modal-overlay"
    style="display: none;"
>
    <div id="modalContent" class="relative max-w-4xl w-full modal-content">
        <img
            id="modalImage"
            src=""
            alt="Imagen ampliada"
            class="w-full h-auto rounded-lg max-h-screen object-contain"
        />
        <button
            id="closeModal"
            class="absolute top-4 right-4 bg-white text-black rounded-full w-10 h-10 flex justify-center items-center hover:bg-gray-200 transition-all duration-300 hover:scale-110"
            aria-label="Cerrar"
        >
            ✕
        </button>
    </div>
</div>

<style>
    .modal-overlay {
        transition: opacity 0.3s ease-in-out;
        opacity: 0;
    }

    .modal-overlay.show {
        opacity: 1;
    }

    .modal-content {
        transform: scale(0.7);
        opacity: 0;
        transition:
            transform 0.3s ease-out,
            opacity 0.3s ease-out;
    }

    .modal-content.show {
        transform: scale(1);
        opacity: 1;
    }
</style>

<script is:inline>
    const modal = document.getElementById("imageModal");
    const modalContent = document.getElementById("modalContent");
    const modalImage = document.getElementById("modalImage");
    const closeBtn = document.getElementById("closeModal");

    // Abre el modal con animación
    document.addEventListener("click", (e) => {
        const target = e.target;
        if (
            target instanceof HTMLElement &&
            target.classList.contains("gallery-img")
        ) {
            if (
                modalImage instanceof HTMLImageElement &&
                modal instanceof HTMLElement &&
                modalContent instanceof HTMLElement
            ) {
                modalImage.src = target.src;
                modal.style.display = "flex";

                // Trigger animation
                setTimeout(() => {
                    modal.classList.add("show");
                    modalContent.classList.add("show");
                }, 10);

                document.body.style.overflow = "hidden";
            }
        }
    });

    function closeImageModal() {
        if (
            modal instanceof HTMLElement &&
            modalContent instanceof HTMLElement
        ) {
            modal.classList.remove("show");
            modalContent.classList.remove("show");

            setTimeout(() => {
                modal.style.display = "none";
                document.body.style.overflow = "auto";
            }, 300);
        }
    }

    if (closeBtn instanceof HTMLElement) {
        closeBtn.addEventListener("click", closeImageModal);
    }

    if (modal instanceof HTMLElement) {
        modal.addEventListener("click", (e) => {
            if (e.target === modal) {
                closeImageModal();
            }
        });
    }

    // Cierra con la tecla ESC
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
            closeImageModal();
        }
    });
</script>
